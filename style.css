/* ============================================
GIFTS TYCOON - STYLE.CSS
Spring Mining Adventure Theme - Enhanced
============================================ */
:root {
    --bg-sky: linear-gradient(180deg, #87CEEB 0%, #B0E2FF 40%, #90EE90 70%, #5DA845 100%);
    --bg-underground: linear-gradient(180deg, #8B6914 0%, #6B4C10 40%, #4A3008 100%);
    --color-normal: #FFD700;
    --color-silver: #C0C0C0;
    --color-gold: #FFB400;
    --color-primary: #4CAF50;
    --color-primary-dark: #388E3C;
    --color-accent: #FF6B35;
    --color-accent2: #9B59B6;
    --panel-bg: rgba(255,255,255,0.95);
    --panel-shadow: 0 8px 32px rgba(0,0,0,0.2);
    --radius: 16px;
    --radius-sm: 10px;
    --font-game: 'Fredoka One', cursive;
    --font-body: 'Nunito', sans-serif;
    --hud-h: 60px;
    --nav-h: 70px;
}

* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

html, body {
    width: 100%; height: 100%; overflow: hidden;
    font-family: var(--font-body);
    background: #1a0a00;
    touch-action: manipulation;
}

/* ========== LOADING SCREEN ========== */
#loading-screen {
    position: fixed; inset: 0; z-index: 9999;
    background: linear-gradient(135deg, #1a472a 0%, #2d6a4f 50%, #1a472a 100%);
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    gap: 16px;
}

.load-logo { font-size: 80px; animation: bounce 1s infinite; }
.load-title {
    font-family: var(--font-game);
    font-size: 36px; color: #FFD700;
    text-shadow: 0 4px 16px rgba(255,215,0,0.5), 0 2px 4px #000;
}
.load-bar-wrap {
    width: 200px; height: 12px;
    background: rgba(255,255,255,0.2); border-radius: 8px; overflow: hidden;
}
.load-bar {
    height: 100%; width: 0%; border-radius: 8px;
    background: linear-gradient(90deg, #FFD700, #FFA000);
    transition: width 0.1s ease;
}
.load-text { color: rgba(255,255,255,0.8); font-size: 14px; }

@keyframes bounce { 
    0%,100%{transform:translateY(0)} 
    50%{transform:translateY(-15px)} 
}

/* ========== APP CONTAINER ========== */
#app {
    position: fixed; inset: 0;
    display: flex; flex-direction: column;
    overflow: hidden;
}

.hidden { display: none !important; }

/* ========== HUD ========== */
#hud {
    height: var(--hud-h);
    background: linear-gradient(135deg, #1b5e20, #2e7d32);
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 12px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.3);
    z-index: 100; position: relative;
    border-bottom: 2px solid rgba(255,255,255,0.1);
}

.hud-coins { display: flex; gap: 10px; align-items: center; }
.hud-coin-item {
    display: flex; align-items: center; gap: 4px;
    background: rgba(0,0,0,0.3); border-radius: 20px;
    padding: 4px 10px;
    font-family: var(--font-game);
    font-size: 14px; color: #fff;
    border: 1px solid rgba(255,255,255,0.15);
}
.coin-icon { font-size: 16px; }
.hud-right { display: flex; flex-direction: column; align-items: flex-end; gap: 4px; }
.hud-rate {
    font-size: 12px; color: #A5D6A7;
    font-family: var(--font-game);
}
.happy-badge {
    background: linear-gradient(135deg, #FF6B35, #FFD700);
    color: #fff; font-size: 11px; font-weight: 800;
    padding: 2px 8px; border-radius: 12px;
    animation: pulse-glow 1s infinite;
    font-family: var(--font-game);
}

@keyframes pulse-glow {
    0%,100%{box-shadow:0 0 6px rgba(255,107,53,0.5)}
    50%{box-shadow:0 0 16px rgba(255,215,0,0.8)}
}

/* ========== SCREENS ========== */
.screen {
    flex: 1; overflow: hidden;
    position: relative;
}
.screen.active { display: flex; flex-direction: column; }

/* ========== GAME CANVAS ========== */
#game-canvas {
    position: absolute; inset: 0;
    width: 100%; height: 100%;
}

/* ========== UPGRADE PANEL ========== */
.upgrade-panel {
    position: absolute; bottom: 90px; left: 0; right: 0;
    padding: 0 12px; z-index: 50;
}
.upgrade-panel-inner {
    background: var(--panel-bg);
    border-radius: var(--radius) var(--radius) 0 0;
    padding: 16px;
    box-shadow: var(--panel-shadow);
    border: 2px solid rgba(76,175,80,0.3);
    max-height: 60vh; overflow-y: auto;
}
.upgrade-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 14px;
    font-family: var(--font-game); font-size: 20px; color: #1b5e20;
}
.close-btn {
    background: #f44336; color: #fff;
    border: none; border-radius: 50%;
    width: 30px; height: 30px;
    font-size: 14px; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
}

.upgrade-section { margin-bottom: 20px; }
.upgrade-section-title {
    font-family: var(--font-game); font-size: 15px;
    color: #388E3C; margin-bottom: 10px;
    border-bottom: 2px solid #E8F5E9; padding-bottom: 6px;
}
.upgrade-item {
    display: flex; align-items: center; justify-content: space-between;
    background: #F1F8E9; border-radius: var(--radius-sm);
    padding: 10px 12px; margin-bottom: 8px;
    border: 1px solid #DCEDC8;
}
.upgrade-item-info { flex: 1; }
.upgrade-item-name { font-weight: 700; color: #33691E; font-size: 14px; }
.upgrade-item-desc { font-size: 12px; color: #558B2F; margin-top: 2px; }
.upgrade-item-level {
    background: #8BC34A; color: #fff;
    border-radius: 8px; padding: 2px 8px;
    font-size: 12px; font-family: var(--font-game);
    margin: 0 10px;
}
.upgrade-cost-btn {
    background: linear-gradient(135deg, #4CAF50, #2E7D32);
    color: #fff; border: none; border-radius: var(--radius-sm);
    padding: 8px 14px; font-family: var(--font-game);
    font-size: 13px; cursor: pointer;
    box-shadow: 0 3px 0 #1B5E20;
    transition: all 0.1s;
    white-space: nowrap; min-width: 90px; text-align: center;
}
.upgrade-cost-btn:active { transform: translateY(2px); box-shadow: 0 1px 0 #1B5E20; }
.upgrade-cost-btn.maxed { background: linear-gradient(135deg, #9E9E9E, #616161); box-shadow: 0 3px 0 #424242; }
.upgrade-cost-btn.insufficient { background: linear-gradient(135deg, #EF9A9A, #EF5350); box-shadow: 0 3px 0 #C62828; cursor: not-allowed; }

.manager-buy-btn {
    background: linear-gradient(135deg, #9B59B6, #6C3483);
    color: #fff; border: none; border-radius: var(--radius-sm);
    padding: 10px 16px; font-family: var(--font-game);
    font-size: 14px; cursor: pointer;
    box-shadow: 0 3px 0 #4A235A;
    width: 100%; margin-top: 6px;
    transition: all 0.1s;
}
.manager-buy-btn:active { transform: translateY(2px); box-shadow: 0 1px 0 #4A235A; }
.manager-buy-btn.owned { background: linear-gradient(135deg, #4CAF50, #2E7D32); box-shadow: 0 3px 0 #1B5E20; }

/* ========== SELL WRAP ========== */
.sell-wrap {
    position: absolute; bottom: 10px; left: 12px; right: 12px;
    display: flex; align-items: center; gap: 10px;
    background: rgba(27,94,32,0.95); border-radius: var(--radius);
    padding: 10px 14px;
    box-shadow: var(--panel-shadow);
    border: 2px solid rgba(139,195,74,0.5);
}
.warehouse-info { display: flex; align-items: center; gap: 10px; flex: 1; }
.wh-icon { font-size: 28px; }
.wh-label { font-size: 11px; color: rgba(255,255,255,0.7); }
.wh-cap { font-family: var(--font-game); font-size: 16px; color: #fff; }
.sell-btn {
    background: linear-gradient(135deg, #FF6B35, #E64A19);
    color: #fff; border: none; border-radius: var(--radius-sm);
    padding: 10px 16px; font-family: var(--font-game);
    font-size: 14px; cursor: pointer; text-align: center;
    box-shadow: 0 4px 0 #BF360C;
    transition: all 0.1s; line-height: 1.3;
}
.sell-btn:active { transform: translateY(3px); box-shadow: 0 1px 0 #BF360C; }

/* ========== RESEARCH SCREEN ========== */
.coming-soon-wrap {
    flex: 1; display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    background: var(--bg-sky); gap: 12px; padding: 30px;
    text-align: center;
}
.cs-emoji { font-size: 80px; animation: float 3s ease-in-out infinite; }

@keyframes float { 
    0%,100%{transform:translateY(0)} 
    50%{transform:translateY(-12px)} 
}

.cs-title { font-family: var(--font-game); font-size: 36px; color: #1b5e20; text-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.cs-sub { font-family: var(--font-game); font-size: 22px; color: #388E3C; }
.cs-desc { color: #555; font-size: 15px; max-width: 260px; line-height: 1.5; }

/* ========== LEADERBOARD ========== */
#miners-screen {
    background: linear-gradient(180deg, #E8F5E9 0%, #F1F8E9 100%);
    overflow-y: auto;
}
.lb-header { padding: 16px; text-align: center; }
.lb-header h2 { font-family: var(--font-game); font-size: 24px; color: #1b5e20; }
.lb-tabs { display: flex; gap: 8px; padding: 0 12px 12px; }
.lb-tab {
    flex: 1; padding: 8px 4px; border: 2px solid #4CAF50;
    background: transparent; border-radius: var(--radius-sm);
    font-family: var(--font-game); font-size: 12px; color: #4CAF50; cursor: pointer;
    transition: all 0.2s;
}
.lb-tab.active { background: #4CAF50; color: #fff; }
.lb-list { padding: 0 12px 12px; }
.lb-item {
    display: flex; align-items: center; gap: 12px;
    background: #fff; border-radius: var(--radius-sm);
    padding: 10px 14px; margin-bottom: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    border-left: 4px solid #4CAF50;
}
.lb-item.gold-rank { border-left-color: #FFD700; }
.lb-item.silver-rank { border-left-color: #C0C0C0; }
.lb-item.bronze-rank { border-left-color: #CD7F32; }
.lb-rank { font-family: var(--font-game); font-size: 18px; color: #888; min-width: 32px; }
.lb-name { flex: 1; font-weight: 700; color: #333; }
.lb-amount { font-family: var(--font-game); color: #4CAF50; font-size: 16px; }
.lb-loading { text-align: center; padding: 40px; color: #888; }

/* ========== CRAFT SCREEN ========== */
#craft-screen {
    background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
    overflow-y: auto;
}
.craft-wrap { padding: 16px; }
.craft-title { font-family: var(--font-game); font-size: 28px; color: #FFD700; text-align: center; margin-bottom: 4px; }
.craft-info { text-align: center; color: rgba(255,255,255,0.6); font-size: 13px; margin-bottom: 16px; }
.craft-card {
    background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15);
    border-radius: var(--radius); padding: 16px; margin-bottom: 14px;
    backdrop-filter: blur(10px);
}
.craft-card.coming { opacity: 0.5; }
.craft-recipe { display: flex; align-items: center; justify-content: center; gap: 16px; margin-bottom: 12px; }
.craft-input, .craft-output { text-align: center; }
.coin-big { font-size: 40px; }
.craft-amount { font-family: var(--font-game); color: #fff; font-size: 18px; }
.craft-label { font-size: 12px; color: rgba(255,255,255,0.6); }
.craft-arrow { font-size: 28px; color: #FFD700; }
.craft-chance { color: rgba(255,255,255,0.7); font-size: 13px; margin-bottom: 6px; }
.craft-cost { color: rgba(255,255,255,0.7); font-size: 13px; margin-bottom: 10px; }
.craft-btn {
    width: 100%; padding: 12px; border: none;
    background: linear-gradient(135deg, #C0C0C0, #808080);
    color: #fff; border-radius: var(--radius-sm);
    font-family: var(--font-game); font-size: 16px;
    cursor: pointer; box-shadow: 0 4px 0 #555;
    transition: all 0.1s;
}
.craft-btn:active { transform: translateY(3px); box-shadow: 0 1px 0 #555; }
.craft-btn.silver-btn { background: linear-gradient(135deg, #FFD700, #FF8C00); box-shadow: 0 4px 0 #E65100; }
.coming-label { text-align: center; color: #FFD700; font-family: var(--font-game); font-size: 14px; }

/* ========== PROFILE SCREEN ========== */
#profile-screen {
    background: linear-gradient(180deg, #E8F5E9 0%, #C8E6C9 100%);
    overflow-y: auto;
}
.profile-wrap { padding: 16px; }
.profile-header {
    display: flex; align-items: center; gap: 14px;
    background: #fff; border-radius: var(--radius);
    padding: 16px; margin-bottom: 14px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
}
.profile-avatar { font-size: 50px; }
.profile-name { font-family: var(--font-game); font-size: 22px; color: #1b5e20; }
.profile-id { font-size: 13px; color: #888; }
.balance-card {
    background: linear-gradient(135deg, #1b5e20, #2e7d32);
    color: #fff; border-radius: var(--radius);
    padding: 16px; margin-bottom: 14px;
}
.balance-title { font-family: var(--font-game); font-size: 18px; margin-bottom: 10px; }
.balance-row {
    display: flex; justify-content: space-between;
    padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1);
    font-size: 15px;
}
.balance-row b { font-family: var(--font-game); font-size: 18px; }
.profile-actions { display: flex; flex-direction: column; gap: 10px; margin-bottom: 14px; }
.profile-btn {
    padding: 14px; border: none; border-radius: var(--radius);
    font-family: var(--font-game); font-size: 16px; cursor: pointer;
    transition: all 0.1s; box-shadow: 0 4px 0 rgba(0,0,0,0.2);
    color: #fff;
}
.profile-btn:active { transform: translateY(3px); box-shadow: 0 1px 0 rgba(0,0,0,0.2); }
.exchange-btn { background: linear-gradient(135deg, #2196F3, #1565C0); }
.deposit-btn { background: linear-gradient(135deg, #4CAF50, #2E7D32); }
.withdraw-btn { background: linear-gradient(135deg, #FF9800, #E65100); }
.ref-card {
    background: #fff; border-radius: var(--radius);
    padding: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.08);
}
.ref-title { font-family: var(--font-game); font-size: 18px; color: #1b5e20; margin-bottom: 8px; }
.ref-desc { font-size: 13px; color: #555; line-height: 1.5; margin-bottom: 12px; }
.ref-link-wrap { display: flex; gap: 8px; align-items: center; }
.ref-link {
    flex: 1; background: #F1F8E9; border: 1px solid #A5D6A7;
    border-radius: var(--radius-sm); padding: 8px 12px;
    font-size: 12px; color: #388E3C; overflow: hidden;
    text-overflow: ellipsis; white-space: nowrap;
}
.copy-btn {
    background: #4CAF50; color: #fff; border: none;
    border-radius: var(--radius-sm); padding: 8px 12px;
    font-size: 12px; cursor: pointer; white-space: nowrap;
    font-family: var(--font-body);
}

/* ========== ADMIN SCREEN ========== */
#admin-screen {
    background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
    overflow-y: auto; padding: 16px; color: #fff;
}
.admin-wrap h2 { font-family: var(--font-game); font-size: 24px; color: #FFD700; text-align: center; margin-bottom: 16px; }
.admin-section {
    background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
    border-radius: var(--radius); padding: 16px; margin-bottom: 14px;
}
.admin-section h3 { font-family: var(--font-game); font-size: 16px; color: #81D4FA; margin-bottom: 12px; }
.admin-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
.admin-row label { color: rgba(255,255,255,0.8); font-size: 14px; flex: 1; }
.admin-row input {
    background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
    border-radius: 8px; padding: 8px 10px; color: #fff;
    width: 120px; text-align: right; font-size: 14px;
}
.admin-btn {
    width: 100%; padding: 12px; margin-top: 8px;
    background: linear-gradient(135deg, #2196F3, #1565C0);
    color: #fff; border: none; border-radius: var(--radius-sm);
    font-family: var(--font-game); font-size: 15px; cursor: pointer;
    box-shadow: 0 3px 0 #0D47A1;
}
.admin-btn.happy-btn { background: linear-gradient(135deg, #FF6B35, #E64A19); box-shadow: 0 3px 0 #BF360C; }
.admin-btn.red-btn { background: linear-gradient(135deg, #f44336, #c62828); box-shadow: 0 3px 0 #b71c1c; }
.happy-status { font-size: 13px; color: #81D4FA; margin-top: 8px; text-align: center; }
.adm-user-info { margin-top: 12px; }
.adm-user-name { font-family: var(--font-game); font-size: 18px; color: #FFD700; margin-bottom: 10px; }
.adm-balance-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 10px; }
.adm-balance-grid div { display: flex; flex-direction: column; gap: 4px; font-size: 13px; }
.adm-balance-grid input { width: 100%; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; padding: 6px; color: #fff; }
.adm-btn-row { display: flex; gap: 8px; }
.adm-btn-row .admin-btn { margin-top: 0; }

/* ========== BOTTOM NAV ========== */
#bottom-nav {
    height: var(--nav-h);
    background: linear-gradient(135deg, #1b5e20, #2e7d32);
    display: flex; align-items: center;
    border-top: 2px solid rgba(255,255,255,0.1);
    box-shadow: 0 -4px 16px rgba(0,0,0,0.2);
}
.nav-btn {
    flex: 1; display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    gap: 3px; padding: 8px 4px;
    background: none; border: none; cursor: pointer;
    transition: all 0.2s; position: relative;
}
.nav-icon { font-size: 22px; transition: transform 0.2s; }
.nav-label { font-size: 10px; color: rgba(255,255,255,0.6); font-family: var(--font-game); }
.nav-btn.active .nav-icon { transform: scale(1.2); }
.nav-btn.active .nav-label { color: #FFD700; }
.nav-btn.active::after {
    content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
    width: 20px; height: 3px; background: #FFD700; border-radius: 2px 2px 0 0;
}

/* ========== MODAL ========== */
.modal-overlay {
    position: fixed; inset: 0; z-index: 500;
    background: rgba(0,0,0,0.6); backdrop-filter: blur(4px);
    display: flex; align-items: flex-end; justify-content: center;
}
.modal-box {
    background: #fff; border-radius: var(--radius) var(--radius) 0 0;
    padding: 24px; width: 100%; max-height: 80vh;
    overflow-y: auto; animation: slideUp 0.3s ease;
}

@keyframes slideUp { from{transform:translateY(100%)} to{transform:translateY(0)} }

.modal-title { font-family: var(--font-game); font-size: 22px; color: #1b5e20; margin-bottom: 16px; text-align: center; }
.modal-section { margin-bottom: 16px; }
.modal-label { font-size: 14px; color: #555; margin-bottom: 6px; }
.modal-input {
    width: 100%; padding: 12px 14px; border: 2px solid #C8E6C9;
    border-radius: var(--radius-sm); font-size: 16px; color: #333;
}
.modal-input:focus { outline: none; border-color: #4CAF50; }
.modal-info { font-size: 13px; color: #388E3C; margin-top: 6px; }
.modal-btn {
    width: 100%; padding: 14px; margin-top: 8px;
    border: none; border-radius: var(--radius);
    font-family: var(--font-game); font-size: 18px; cursor: pointer;
    color: #fff; box-shadow: 0 4px 0 rgba(0,0,0,0.2);
    transition: all 0.1s;
}
.modal-btn:active { transform: translateY(3px); box-shadow: 0 1px 0 rgba(0,0,0,0.2); }
.modal-btn.green { background: linear-gradient(135deg, #4CAF50, #2E7D32); }
.modal-btn.blue { background: linear-gradient(135deg, #2196F3, #1565C0); }
.modal-btn.orange { background: linear-gradient(135deg, #FF9800, #E65100); }
.modal-cancel { width:100%; padding:12px; margin-top:8px; border:none; background:#eee; border-radius:var(--radius); font-size:15px; cursor:pointer; color:#666; }

/* ========== TOAST ========== */
.toast {
    position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%);
    background: rgba(0,0,0,0.85); color: #fff;
    padding: 10px 24px; border-radius: 24px;
    font-size: 14px; z-index: 1000; white-space: nowrap;
    animation: fadeInOut 2.5s ease forwards;
}

@keyframes fadeInOut {
    0%{opacity:0;transform:translateX(-50%) translateY(20px)}
    15%{opacity:1;transform:translateX(-50%) translateY(0)}
    70%{opacity:1}
    100%{opacity:0;transform:translateX(-50%) translateY(-10px)}
}

/* ========== COIN ANIMATIONS ========== */
.coin-pop {
    position: fixed; pointer-events: none; z-index: 200;
    font-size: 20px; animation: coinPop 1s ease forwards;
}

@keyframes coinPop {
    0%{opacity:1;transform:translateY(0) scale(1)}
    100%{opacity:0;transform:translateY(-60px) scale(1.5)}
}

/* ========== CRAFT RESULT ANIMATION ========== */
.craft-result-win { animation: craftWin 0.5s ease; }
.craft-result-fail { animation: craftFail 0.5s ease; }

@keyframes craftWin { 0%,100%{transform:scale(1)} 50%{transform:scale(1.3)} }
@keyframes craftFail { 0%,50%,100%{transform:rotate(0)} 25%{transform:rotate(-5deg)} 75%{transform:rotate(5deg)} }

/* ========== RESPONSIVE ========== */
@media (max-height: 600px) {
    :root { --hud-h: 48px; --nav-h: 56px; }
    .hud-coin-item { font-size: 12px; padding: 3px 8px; }
}