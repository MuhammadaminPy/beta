<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gifts Tycoon</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loading-screen">
        <div class="load-logo">‚õèÔ∏è</div>
        <div class="load-title">Gifts Tycoon</div>
        <div class="load-bar-wrap">
            <div class="load-bar" id="load-bar"></div>
        </div>
        <div class="load-text">–ó–∞–≥—Ä—É–∑–∫–∞ —à–∞—Ö—Ç—ã...</div>
    </div>

    <div id="app" class="hidden">
        <div id="hud">
            <div class="hud-coins">
                <div class="hud-coin-item">
                    <span class="coin-icon">ü™ô</span>
                    <span id="hud-normal">0</span>
                </div>
                <div class="hud-coin-item">
                    <span class="coin-icon">ü•à</span>
                    <span id="hud-silver">0</span>
                </div>
                <div class="hud-coin-item">
                    <span class="coin-icon">üèÖ</span>
                    <span id="hud-gold">0</span>
                </div>
            </div>
            <div class="hud-right">
                <div class="hud-rate"><span id="hud-rate">0</span>/–º–∏–Ω</div>
                <div id="happy-hour-badge" class="happy-badge hidden">‚ö° –°—á–∞—Å—Ç–ª–∏–≤—ã–π —á–∞—Å!</div>
            </div>
        </div>

        <div id="game-screen" class="screen active">
            <canvas id="game-canvas"></canvas>
            
            <div class="sell-wrap">
                <div class="warehouse-info">
                    <span class="wh-icon">üè¶</span>
                    <div>
                        <div class="wh-label">–•—Ä–∞–Ω–∏–ª–∏—â–µ</div>
                        <div class="wh-cap"><span id="wh-current">0</span> / <span id="wh-max">200</span></div>
                    </div>
                </div>
                <button class="sell-btn" onclick="sellCoins()">
                    –ü—Ä–æ–¥–∞—Ç—å <span id="sell-value">0</span> –º–æ–Ω–µ—Ç
                </button>
            </div>

            <div id="upgrade-panel" class="upgrade-panel hidden">
                <div class="upgrade-panel-inner">
                    <div class="upgrade-header">
                        <span id="upgrade-title">–£–ª—É—á—à–µ–Ω–∏–µ</span>
                        <button class="close-btn" onclick="closeUpgradePanel()">‚úï</button>
                    </div>
                    <div id="upgrade-content"></div>
                </div>
            </div>
        </div>

        <div id="research-screen" class="screen hidden">
            <div class="coming-soon-wrap">
                <div class="cs-emoji">üî≠</div>
                <div class="cs-title">–ò–°–°–õ–ï–î–û–í–ê–ù–ò–Ø</div>
                <div class="cs-sub">–°–ö–û–†–û...</div>
                <div class="cs-desc">
                    –ù–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è —à–∞—Ö—Ç –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã –∂–¥—É—Ç –≤–∞—Å!
                </div>
            </div>
        </div>

        <div id="miners-screen" class="screen hidden">
            <div class="lb-header">
                <h2>üèÜ –¢–æ–ø –ú–∞–π–Ω–µ—Ä—ã</h2>
            </div>
            <div class="lb-tabs">
                <button class="lb-tab active" onclick="switchLbTab('normal', this)">ü™ô –û–±—ã—á–Ω—ã–µ</button>
                <button class="lb-tab" onclick="switchLbTab('silver', this)">ü•à –°–µ—Ä–µ–±—Ä–æ</button>
                <button class="lb-tab" onclick="switchLbTab('gold', this)">üèÖ –ó–æ–ª–æ—Ç–æ</button>
            </div>
            <div id="lb-list" class="lb-list">
                <div class="lb-loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <div id="craft-screen" class="screen hidden">
            <div class="craft-wrap">
                <div class="craft-title">‚öóÔ∏è –ö—Ä–∞—Ñ—Ç</div>
                <div class="craft-info">–ü—Ä–µ–≤—Ä–∞—â–∞–π –º–æ–Ω–µ—Ç—ã –≤ –±–æ–ª–µ–µ —Ü–µ–Ω–Ω—ã–µ!</div>
                
                <div class="craft-card">
                    <div class="craft-recipe">
                        <div class="craft-input">
                            <div class="coin-big">ü™ô</div>
                            <div class="craft-amount">√ó8</div>
                            <div class="craft-label">–û–±—ã—á–Ω—ã—Ö</div>
                        </div>
                        <div class="craft-arrow">‚Üí</div>
                        <div class="craft-output">
                            <div class="coin-big">ü•à</div>
                            <div class="craft-amount">1</div>
                            <div class="craft-label">–°–µ—Ä–µ–±—Ä—è–Ω–∞—è</div>
                        </div>
                    </div>
                    <div class="craft-chance">–®–∞–Ω—Å —É—Å–ø–µ—Ö–∞: 90%</div>
                    <div class="craft-cost">–í–∞—à–∏ –º–æ–Ω–µ—Ç—ã: <span id="craft-normal-bal">0</span></div>
                    <button class="craft-btn" onclick="craftCoin('normal')">–°–∫—Ä–∞—Ñ—Ç–∏—Ç—å</button>
                </div>

                <div class="craft-card">
                    <div class="craft-recipe">
                        <div class="craft-input">
                            <div class="coin-big">ü•à</div>
                            <div class="craft-amount">√ó4</div>
                            <div class="craft-label">–°–µ—Ä–µ–±—Ä—è–Ω—ã—Ö</div>
                        </div>
                        <div class="craft-arrow">‚Üí</div>
                        <div class="craft-output">
                            <div class="coin-big">üèÖ</div>
                            <div class="craft-amount">1</div>
                            <div class="craft-label">–ó–æ–ª–æ—Ç–∞—è</div>
                        </div>
                    </div>
                    <div class="craft-chance">–®–∞–Ω—Å —É—Å–ø–µ—Ö–∞: 90%</div>
                    <div class="craft-cost">–í–∞—à–∏ –º–æ–Ω–µ—Ç—ã: <span id="craft-silver-bal">0</span></div>
                    <button class="craft-btn silver-btn" onclick="craftCoin('silver')">–°–∫—Ä–∞—Ñ—Ç–∏—Ç—å</button>
                </div>

                <div class="craft-card coming">
                    <div class="craft-recipe">
                        <div class="craft-input">
                            <div class="coin-big">üèÖ</div>
                            <div class="craft-amount">√ó?</div>
                            <div class="craft-label">–ó–æ–ª–æ—Ç—ã—Ö</div>
                        </div>
                        <div class="craft-arrow">‚Üí</div>
                        <div class="craft-output">
                            <div class="coin-big">üíé</div>
                            <div class="craft-amount">1</div>
                            <div class="craft-label">–ê–ª–º–∞–∑</div>
                        </div>
                    </div>
                    <div class="coming-label">–°–ö–û–†–û –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏</div>
                </div>
            </div>
        </div>

        <div id="profile-screen" class="screen hidden">
            <div class="profile-wrap">
                <div class="profile-header">
                    <div class="profile-avatar">üë§</div>
                    <div>
                        <div class="profile-name" id="profile-name">–ò–≥—Ä–æ–∫</div>
                        <div class="profile-id" id="profile-id">ID: ---</div>
                    </div>
                </div>

                <div class="balance-card">
                    <div class="balance-title">üí∞ –ë–∞–ª–∞–Ω—Å</div>
                    <div class="balance-row">
                        <span>ü™ô –û–±—ã—á–Ω—ã–µ:</span>
                        <b id="prof-normal">0</b>
                    </div>
                    <div class="balance-row">
                        <span>ü•à –°–µ—Ä–µ–±—Ä—è–Ω—ã–µ:</span>
                        <b id="prof-silver">0</b>
                    </div>
                    <div class="balance-row">
                        <span>üèÖ –ó–æ–ª–æ—Ç—ã–µ:</span>
                        <b id="prof-gold">0</b>
                    </div>
                </div>

                <div class="profile-actions">
                    <button class="profile-btn exchange-btn" onclick="openExchange()">üí± –û–±–º–µ–Ω –Ω–∞ TON</button>
                    <button class="profile-btn deposit-btn" onclick="openDeposit()">üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
                    <button class="profile-btn withdraw-btn" onclick="openWithdraw()">üì§ –í—ã–≤–æ–¥ TON</button>
                </div>

                <div class="ref-card">
                    <div class="ref-title">üë• –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</div>
                    <div class="ref-desc">
                        –ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π 1 —Å–µ—Ä–µ–±—Ä—è–Ω—É—é –º–æ–Ω–µ—Ç—É!<br>
                        –î—Ä—É–≥ –ø–æ–ª—É—á–∏—Ç –±–æ–Ω—É—Å –º–æ–Ω–µ—Ç –∫–∞–∂–¥–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏.
                    </div>
                    <div class="ref-link-wrap">
                        <div class="ref-link" id="ref-link">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <button class="copy-btn" onclick="copyRefLink()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="admin-screen" class="screen hidden">
            <div class="admin-wrap">
                <h2>üîê –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</h2>
                
                <div class="admin-section">
                    <h3>üìä –®–∞–Ω—Å—ã –º–æ–Ω–µ—Ç (%)</h3>
                    <div class="admin-row">
                        <label>ü™ô –û–±—ã—á–Ω–∞—è:</label>
                        <input type="number" id="adm-normal-pct" value="70">
                    </div>
                    <div class="admin-row">
                        <label>ü•à –°–µ—Ä–µ–±—Ä—è–Ω–∞—è:</label>
                        <input type="number" id="adm-silver-pct" value="25">
                    </div>
                    <div class="admin-row">
                        <label>üèÖ –ó–æ–ª–æ—Ç–∞—è:</label>
                        <input type="number" id="adm-gold-pct" value="5">
                    </div>
                    <button class="admin-btn" onclick="adminSaveRates()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–Ω—Å—ã</button>
                </div>

                <div class="admin-section">
                    <h3>üí± –ö—É—Ä—Å –æ–±–º–µ–Ω–∞ TON</h3>
                    <div class="admin-row">
                        <label>ü•à 1 —Å–µ—Ä–µ–±—Ä–æ = TON:</label>
                        <input type="number" id="adm-silver-rate" value="0.001" step="0.0001">
                    </div>
                    <div class="admin-row">
                        <label>üèÖ 1 –∑–æ–ª–æ—Ç–æ = TON:</label>
                        <input type="number" id="adm-gold-rate" value="0.005" step="0.0001">
                    </div>
                    <button class="admin-btn" onclick="adminSaveRates()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫—É—Ä—Å—ã</button>
                </div>

                <div class="admin-section">
                    <h3>‚ö° –°—á–∞—Å—Ç–ª–∏–≤—ã–π —á–∞—Å</h3>
                    <div class="admin-row">
                        <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω):</label>
                        <input type="number" id="adm-happy-duration" value="60">
                    </div>
                    <button class="admin-btn happy-btn" onclick="adminStartHappyHour()">–ó–∞–ø—É—Å—Ç–∏—Ç—å!</button>
                    <div id="happy-status" class="happy-status"></div>
                </div>

                <div class="admin-section">
                    <h3>üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º</h3>
                    <div class="admin-row">
                        <label>Telegram ID:</label>
                        <input type="text" id="adm-user-id" placeholder="123456789">
                    </div>
                    <button class="admin-btn" onclick="adminLookupUser()">–ù–∞–π—Ç–∏</button>
                    
                    <div id="adm-user-info" class="adm-user-info hidden">
                        <div class="adm-user-name" id="adm-user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ---</div>
                        <div class="adm-balance-grid">
                            <div>
                                <label>ü™ô</label>
                                <input type="number" id="adm-give-normal" placeholder="0">
                            </div>
                            <div>
                                <label>ü•à</label>
                                <input type="number" id="adm-give-silver" placeholder="0">
                            </div>
                            <div>
                                <label>üèÖ</label>
                                <input type="number" id="adm-give-gold" placeholder="0">
                            </div>
                        </div>
                        <div class="adm-btn-row">
                            <button class="admin-btn" onclick="adminGiveCoins()">‚ûï –ù–∞—á–∏—Å–ª–∏—Ç—å</button>
                            <button class="admin-btn red-btn" onclick="adminRemoveCoins()">‚ûñ –°–ø–∏—Å–∞—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="bottom-nav">
            <button class="nav-btn active" onclick="switchScreen('game', this)">
                <span class="nav-icon">‚õèÔ∏è</span>
                <span class="nav-label">–®–∞—Ö—Ç–∞</span>
            </button>
            <button class="nav-btn" onclick="switchScreen('research', this)">
                <span class="nav-icon">üî≠</span>
                <span class="nav-label">–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å</span>
            </button>
            <button class="nav-btn" onclick="switchScreen('miners', this)">
                <span class="nav-icon">üèÜ</span>
                <span class="nav-label">–ú–∞–π–Ω–µ—Ä—ã</span>
            </button>
            <button class="nav-btn" onclick="switchScreen('craft', this)">
                <span class="nav-icon">‚öóÔ∏è</span>
                <span class="nav-label">–ö—Ä–∞—Ñ—Ç</span>
            </button>
            <button class="nav-btn" onclick="switchScreen('profile', this)">
                <span class="nav-icon">üë§</span>
                <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
        </div>
    </div>

    <div id="modal-overlay" class="modal-overlay hidden" onclick="closeModal()">
        <div id="modal-box" class="modal-box" onclick="event.stopPropagation()">
            <div id="modal-content"></div>
        </div>
    </div>

    <div id="toast" class="toast hidden"></div>

    <script src="game.js"></script>
</body>
</html>
